= Explore Graph

== Explore Graph

After data has been loaded, the Explore Graph page allows you to search for vertices in a graph, to discover nearby vertices which satisfy conditions of your choice, and to find the paths between vertices.

image::explore-graph%20%281%29.png[]

Below is an example of an exploration result:

image::explore%20%281%29.png[]

The Explore Graph page is vertically divided into three parts, from left to right:

[discrete]
==== The Inner Navigation Bar

The menu options, from top to bottom, are the following:

[cols="^,<"]
|===
| menu option | functionality

| image:search_btn.png[]
| Search vertices: select specific vertices with conditions.

| image:k-step.png[]
| Expand from vertices: find neighborhood of the specified vertices.

| image:paths.png[]
| Find paths: find paths between the selected source vertex and target vertex.

| image:connections%20%281%29%20%283%29.png[]
| Find connections: find connecting paths between a set of vertices.

| image:gsql%20%281%29.png[]
| Run queries: run installed GSQL queries.
|===

[discrete]
==== The Parameter Panel

Set filters, conditions and other parameters for the selected option from the Inner Navigation Bar.

[discrete]
==== The Graph Exploration Panel

The exploration result is displayed in this panel.

Adjust the results display, take a snapshot of the display, and modify selected data objects in the result.

image::screen-shot-2020-06-03-at-5.06.21-pm.png[]

The menu buttons, from left to right, are the following:

* *Open exploration history* : Open a previously saved graph exploration result.
* *Save exploration* : Save the current visualization result.

[CAUTION]
====
If the graph schema is modified after the exploration result is saved, the result cannot be opened any more.
====

* *Save screenshot* : Save the current visualization result as a png file.
* *Locate vertices in result* : Search the exploration result by vertex id or attribute value.
* *Only show selections* : First select one or more objects. Clicking the button will hide all the objects which are not selected.
* *Hide* : First select one or more objects. Clicking the button will hide the selected vertices and edges (or all if none is selected).
* *Undo* : Undo the last change to the visualization result set (that is, changes to which objects are included in the result set).
* *Redo* : Redo the most recent undone change to the visualization result set (that is, changes to which objects are included in the result set).

[CAUTION]
====
Database changes (adding or deleting vertices/edges, editing attributes) cannot be undone with the Undo feature. +
Also, Undo/Redo do not include layout and display change (e.g., positioning of objects and display of attributes).
====

* *Add new vertex* : Add a new vertex into the visualization result *as well as to the graph database* .
* *Add new edge* : Add a new edge into the visualization result *as well as to the graph database* .
* *Edit attributes* : Change the attributes of the selected object in the visualization result *as well as the graph database* .
* *Delete selected elements* : Delete the selected elements from the visualization result *as well as the graph database* .
* *Change settings* : Select which attribute values to display with each vertex or edge type. Enable/disable popup display of all attributes when the cursor hovers over a vertex or edge.

The Parameter Panel can be hidden by clicking its corresponding button in the Explore Graph Menu.

=== Search Vertices In Graph +++<a id="TigerGraphGraphStudioUIGuide-SearchVerticesInGraph">++++++</a>+++

The first button in the Explore Graph Menu is the "search vertices" optionimage:search_btn.png[]. This option lets you select an initial set of vertices for your exploration. It is also the default option when you first enter the Explore Graph page. Clicking the button again will hide the Parameter Panel to increase space for the Graph Exploration Panel.

==== Search Vertices by ID +++<a id="TigerGraphGraphStudioUIGuide-SearchVerticesByID">++++++</a>+++

Choose vertex type from the Vertex type dropdown list, and enter the vertex id in the Vertex id input box, then click Search button. If there is one vertex that matches the vertex type and id, it will be shown in Graph Exploration panel.

image::search_vertex_by_id.png[]

==== Let GraphStudio pick vertices +++<a id="TigerGraphGraphStudioUIGuide-LetGraphStudioPickVertices">++++++</a>+++

If you don't have a particular vertex ID in mind, you can have GraphStudio pick some vertices for you. In the Parameter Panel, enter a number of vertices to pick, and click on Pick vertices buttonimage:pick_vertices_btn.png[]. The explorer will pick this number of vertices for each vertex type included in your search.

image::pick_vertices.png[]

The Configuration section in the Parameter Panel specifies which types of vertices you want to include in your selection. By default, all vertex types are selected. Uncheck some boxes if you want to narrow your selection.

image::pick-vertex-by-type.png[]

==== Search vertices with attribute filters

You can control vertex search in finer granularity by creating attribute filters. Click the filter buttonimage:filter%20%282%29%20%281%29%20%282%29.png[]to the right of any vertex type. In the pop up window, you can create a condition involving attributes of the vertex type. The user experience is same as creating data filters when you do data mapping. Here is an example attribute filter for searching company vertices with foundYear >= 2012:

image::attr-filter.png[]

Click ADD, then the filter condition is shown below company vertex type:

image::attr-filter-added.png[]

Click Pick vertices buttonâ€‹ image:pick_vertices_btn.png[] again, TigerGraph will search for up to 1 company vertices with a foundYear >= 2012.

[CAUTION]
====
If your graph contains a large number of vertices, searching vertices with attribute filters can be extremely slow.
====

[NOTE]
====
NOTE: If you keep exploring the graph in the Explore Graph page, the previous exploration result won't be automatically erased. Instead, your new exploration result will be merged together with the previous visualized graph. The objects from the most recent exploration action will be selected (highlighted with a thick gray border) to distinguish them from the previous visualized graph.
====

image::new_exploration_result_merged.png[]

=== Expand From Vertices +++<a id="TigerGraphGraphStudioUIGuide-ExpandFromVertices">++++++</a>+++

The second button in the Explore Graph Menu is the "Expand from vertices" optionimage:k-step.png[]. "Expand" in this context means find 1-step or multi-step neighbors of the selected vertices. Clicking the button again will hide the Parameter Panel to increase space for the Graph Exploration Panel. To expand from vertices, you need to have at least one selected vertex in the Graph Exploration Panel. If no vertices are visible, please refer to the previous section "Search Vertices in Graph" to search for some vertices.

[NOTE]
====
Shortcut: double-clicking on a vertex will expand to up to 200 neighbors of that vertex.
====

==== Choose Vertices To Expand +++<a id="TigerGraphGraphStudioUIGuide-ChooseVerticesToExpand">++++++</a>+++

There might be some selected vertices from the previous action. A vertex that is selected has a thick gray border around it. The standard click and shift-click behaviors for selecting one or multiple objects applies:

* Click on a vertex to select it. Any previously selected objects are unselected.
* Shift-click on an unselected object to add it to the selection set.
* Shift-click on a selected object to remove it from the selection set.

To unselect all vertices, click on a blank area of the panel.

image::select-multiple-vertices%20%281%29.png[]

==== Set Expansion Conditions +++<a id="TigerGraphGraphStudioUIGuide-SetExpansionConditions">++++++</a>+++

GraphStudio lets you expand multiple steps from the target vertices, as long as the resulting number of vertices and edges does not exceed the limit for visualization (default limit is 5000 vertices and 10000 edges). The conditions for each expansion step are specified independently.

In the Parameter Panel, set the conditions for each expansion step:

* Maximum number of edges include for each vertex. The effect is that vertices which have more neighbors than this limit will not have all their neighbors included in the expansion.
* Edge types and the attribute filter for each edge type to include.
* Target vertex types and the attribute filter for each vertex type to include.

image::config.png[]

Initially, the expansion conditions panel for only one expansion step is shown. Click "Add Expansion Step" to add more expansion steps.

image::add_expansion_step.png[]

Similarly, you can remove expansion steps by clicking the "Remove Expansion Step" button.

image::remove_expansion_step.png[]

==== Expand +++<a id="TigerGraphGraphStudioUIGuide-Expand">++++++</a>+++

After setting the conditions for each expansion step, click on the "Expand" buttonimage:expand.png[]to perform the expansion. The Graph Exploration Panel will be updated to include the expansion result. The expansion starting vertices will be highlighted with a white border. Here is a sample two-step expansion starting from 1 vertex:

image::two-step.png[]

=== Find Paths Between Two Vertices +++<a id="TigerGraphGraphStudioUIGuide-FindPathsBetweenTwoVertices">++++++</a>+++

The third button in the Explore Graph Menu is the "Find paths" optionimage:paths.png[]. This option finds paths between two vertices with your specified conditions. Clicking the button again will hide the Parameter Panel.

==== Choose Starting Vertex and Destination Vertex +++<a id="TigerGraphGraphStudioUIGuide-ChooseStartingVertexAndDestinationVertex">++++++</a>+++

The top section of the Parameter Panel asks for your desired starting vertex and destination vertex.

image::find_path_no_input.png[]

There are two ways to provide this information. Each of the two vertices can be selected by either method.

If you know the ID and vertex type for a vertex, you can choose vertex type from dropdown list and type vertex id in the input box.  The vertex does not need to be currently displayed in the Graph Exploration Panel.

If the vertex you want is already displayed in the Graph Exploration Panel, a more convenient way is the following:

. Click on the input box.
. Click on the desired vertex in the Graph Exploration Panel. Then, GraphStudio will automatically fill in the values for you.

image::find_path_with_input.png[]

You can click the swap icon (two green arrows) at right to switch the starting vertex and the destination vertex.

==== Set Conditions For Paths +++<a id="TigerGraphGraphStudioUIGuide-SetConditionsForPaths">++++++</a>+++

GraphStudio provide three types of path searches:

. One shortest path: search for and highlight a shortest path between the two vertices.
. All shortest paths: search for and highlight all shortest paths between the two vertices.
. All paths: search for and highlight all valid paths between the two vertices.

Since path-finding queries may have high computational cost if the graph is very large, a parameter is available to limit the path length.

image::path_types.png[]

In addition to the search type and the maximal length, you can also specify the valid vertex types and edge types and their attribute conditions which may be included in the paths.

image::path-filters.png[]

==== Find Paths +++<a id="TigerGraphGraphStudioUIGuide-FindPaths">++++++</a>+++

After selecting the endpoint vertices and setting the search conditions, click on the "Find Paths" buttonimage:find_path_btn.png[]to start the search.

image::find-paths.png[]

=== Find Connections Between Multiple Vertices +++<a id="TigerGraphGraphStudioUIGuide-FindConnectionsBetweenMultipleVertices">++++++</a>+++

The fourth button in the Explore Graph Menu is the "Find connections" optionimage:connections%20%281%29%20%283%29.png[]. Given a set of starting vertices, this feature finds a "connection community" which is defined as follows:

. For each pair of vertices in the vertex set, if there is a shortest path no longer than the maximum path length parameter, include that path in the result.
. The final result is the union of all of these shortest paths (one path per vertex pair).

This feature is equivalent to running the "Show One Shortest Path" option for each pair of vertices in the selected set.

==== Choose Vertices for Finding Connections +++<a id="TigerGraphGraphStudioUIGuide-ChooseVerticesforFindingConnections">++++++</a>+++

Click on a vertex to select it. Use shift-click to select more than one object. Each time you select another vertex, it will be added to the list in the Parameter Panel.

image::find_connections%20%282%29.png[]

==== Set Conditions For Connection Finding +++<a id="TigerGraphGraphStudioUIGuide-SetConditionsForConnectionFinding">++++++</a>+++

Since this query may have high computational cost if the graph is very large, a parameter is available to limit the path length.

You can also specify the valid vertex types and edge types which may be included in the connections.

image::find-connections.png[]

==== Find Connections +++<a id="TigerGraphGraphStudioUIGuide-FindConnections">++++++</a>+++

After selecting the vertices and setting the search conditions, click on the "Find Connection Paths" buttonimage:find_connection_paths_btn.png[]to start the search.

image::find_connections_result.png[]

=== Run GSQL Queries +++<a id="TigerGraphGraphStudioUIGuide-GraphExplorationPanelOptions">++++++</a>+++

If you have written and installed some GSQL queries (see more at xref:write-queries.adoc[Write Queries]), you can run the queries mixed with the graph exploration functionalities mentioned above.

