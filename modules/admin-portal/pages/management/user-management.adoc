= User Management

== User Management Page
The User Management page has three tabs: My Profile, All Users and Role Management.

=== My Profile

All users can access the My Profile tab to manage themselves.

image::my-profile-updated.png[]

There are three information cards at the top: Username shows the user's username; Accessible graph shows how many graphs the user can access, and Password allows user to change password by clicking the key icon image:key.png[] :

image::change-password.png[]

Below the cards are secret management section. You can create as many secrets for each graph as you want, but remember to copy the secret value out at the creation time. Once you refresh the page or go to another page and come back, the actual secret value will be masked for security. You need to provide an alias for the secret, and click the green plus sign to add the secret.

image::secret-management.png[]

When token authentication is enabled, you need to use the secrets to request tokens and add the tokens in the HTTP request headers to call TigerGraph RESTful endpoints. Read more at: xref:3.2@tigergraph-server:user-access:README.adoc[].

=== All Users

[NOTE]
====
Both native users and proxy users are displayed in the User section. However, you can only change password for native users.
====

Only users having user or proxy groups management permission can access this tab. Users with user management permission(`READ_USER`, `WRITE_USER` privileges) can add new users, change other users' password, delete users. Users with proxy groups management permission(`READ_PROXYGROUP`, `WRITE_PROXYGROUP` privileges) can create proxy groups, change proxy rules of the groups, and delete proxy groups. Check more details in xref:tigergraph-server:reference:list-of-privileges[List of Privileges]

image::all-users-updated.png[]

Click image:add-user-btn.png[] to add new users:

image::all-users%20%281%29.png[]

Click image:change-others-password-btn.png[] to change other users' password:

image::change-others-password.png[]

Click image:delete_btn.png[] to delete a user.

Click image:proxy-groups-tab.png[] to see all proxy groups:

image::proxy-groups.png[]

Click image:add-group-btn.png[] to add new proxy groups:

image::add-proxy-group.png[]

Click image:edit.png[] to edit the proxy rule of an existing proxy group:

image::edit-proxy-group.png[]

Click image:delete_btn.png[] to delete a proxy group.

Read more about proxy group at xref:3.2@tigergraph-server:user-access:README.adoc[].

=== User-defined Roles





=== Role Management

[CAUTION]
====
Admin Portal does not indicate whether a user belongs a proxy group. You can find out more from GSQL client.

Admin Portal shows a combination of roles for proxy users. Proxy user which belongs to a proxy group inherits all the roles from the proxy group plus all the roles the proxy user has. Therefore, if you want to revoke a role from a proxy user, you need to revoke the role from the proxy group first. Then you might need to revoke the same role from the proxy user if the proxy user also has that role.
====

Users must have `READ_ROLE` privilege along with`READ_USER` or `READ_PROXYGROUP` privilege to access this tab. To assign roles, users need to have `WRITE_ROLE` privilege. If you only have `READ_ROLE` privilege, you can only view the current assignment but can not modify it. Check GSQL privilege details within xref:tigergraph-server:user-access:role-management[Role Management]

image::role-management.png[]

==== Select a graph

You can use the dropdown menu at the top left corner to select on which graph you want to assign different roles to different users, you can either choose `global` to assign global roles or a specific graph to assign local roles:

image:select-graph-1.png[] image:select-graph-2.png[]

==== Select a role

You can use the second dropdown menu to select a role that you want to assign to different users:

image::select-role.png[]

[NOTE]

With `global` selected, you can assign all global built-in or user-defined roles. With a specific graph selected, you can assign all local built-in roles or local user-defined roles within that graph.

==== View role details

Next to the dropdowns, click the image:view-role-detail-btn.png[] to view the infos of the chosen role.

image::role-detail.png[]

==== Search user

You can type in text to search for users:

image::search-user.png[]

==== Settings for users

You can sort the users by alphabetic order or name length:

image::sort-users.png[]

You can choose to show all users, show the users who have the role, or show the users who don't have the role:

image::show-users.png[]

==== Grant/revoke a role to/from users

[NOTE]

Within a small screen, you need to click image:manage-btn.png[] to open the assignment panel.

All users will be listed with a checkbox. You can check to grant or uncheck to revoke.

image::user-assignment.png[]

After modifying your assignment, image:discard-btn.png[] and image:save-btn.png[] will be enabled. You either discard all your changes, or save your assignment.

image::user-assignment-changed.png[]

After assignment saved or discard, the two buttons would be disabled again.

Similarly, you can also click image:proxy-groups%20%281%29.png[] to switch to proxy groups and manage their roles.

image::manage-groups.png[]

[NOTE]
====
*Tip:* If you manage users through GSQL, please click on refresh button in the top right corner to reflect the changes in Admin Portal.
====
